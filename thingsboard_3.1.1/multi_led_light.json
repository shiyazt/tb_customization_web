{
  "alias": "led_light",
  "name": "Multi LED Light",
  "descriptor": {
    "type": "latest",
    "sizeX": 3.5,
    "sizeY": 4,
    "resources": [],
    "templateHtml": "<div class='card' *ngFor=\"let item of data\"\n[ngStyle]=\"{ 'border' : '2px solid'+ ledColor  }\">\n    <div class=\"title\">{{title}}</div>\n    <div #led class=\"led\"\n    [ngStyle]=\"{ 'background' : ledColor }\"></div>\n    <!--<div>{{item.dataKey.label}}</div>-->\n    <div class=\"value\">Value : {{ item.data[0] && item.data[0][1] }}</div>\n</div>",
    "templateCss": ".card {\n    padding : 5px;\n    border : 2px solid red;\n    border-radius: 10px;\n    /*background-image: linear-gradient(to right, #3e5151, #decba4);*/\n    background-color: #ebebeb;\n}\n\n\n.card .title {\n    font-weight: 500;\n    font-size: 24px;\n    margin : 5px auto 2px auto;\n    text-align: center;\n}\n\n.card .value {\n    text-align: center;\n}\n\n.led {\n    border-radius: 20px;\n    width: 30px;\n    height: 30px;\n    box-shadow: 0px 0px 3px black;\n    margin: 5px auto 2px auto;\n    zoom: 5;\n    background-image: linear-gradient(90deg, rgba(142,142,142,1) 0%, rgba(158,158,158,1) 49%, rgba(142,142,142,1) 100%);\n}\n\n.led:after {\n    display: block;            \n    content: '';\n    /*margin-left: 1px;*/\n    /*margin-right: 1px;*/\n    width: 30px;\n    height: 30px;\n    border-radius: 20px;\n    /*-webkit-border-top-right-radius: 9px 8px;*/\n    /*-webkit-border-top-left-radius: 9px 8px;*/\n    /*-webkit-border-bottom-right-radius: 9px 8px;*/\n    /*-webkit-border-bottom-left-radius: 9px 8px;*/\n    background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.2) 100%);\n}\n\n.green {\n    background-image: -webkit-linear-gradient(top, #13fB04 0%, #58e343 50%, #ADED99 100%);\n}\n\n.orange {\n    background-image: -webkit-linear-gradient(top, #f9a004 0%, #e0ac45 50%, #ead698 100%);\n}\n\n\n.red {\n    background-image: -webkit-linear-gradient(top, #fb1304 0%, #e35843 50%, #edad99 100%);\n}\n\n",
    "controllerScript": "self.onInit = function() {\n    var scope = self.ctx.$scope;\n    scope.title = self.ctx.settings.title\n    // scope.led1Color = tinycolor(self.ctx.settings.led1).brighten(30).toHexString();\n    // scope.led2Color = tinycolor(self.ctx.settings.led2).brighten(30).toHexString();\n    // scope.ledColor = tinycolor(self.ctx.settings.led1).brighten(30).toHexString();\n    scope.data = self.ctx.defaultSubscription.data;\n    \n    if(scope.data.length > 0){\n        for (i=0; i < scope.data.length; i++){\n            if(scope.data[i].data[0]){\n                scope.ledColor = updateColor(scope.data[i].data[0][1]); \n            }\n        }\n    }\n    \n\n    \n    self.onResize();\n    \n    console.log(self.ctx.settings);\n\n}\n\n\nfunction updateColor(value) {\n    var color = null\n    switch(value){\n        case 1:\n            color = tinycolor(self.ctx.settings.led1).brighten(20).toHexString();\n            break;\n        case 2:\n            color = tinycolor(self.ctx.settings.led2).brighten(20).toHexString();\n            break;\n        case 3:\n            color = tinycolor(self.ctx.settings.led3).brighten(20).toHexString();\n            break;\n        case 4:\n            color = tinycolor(self.ctx.settings.led4).brighten(20).toHexString();\n            break;\n        case 5:\n            color = tinycolor(self.ctx.settings.led5).brighten(20).toHexString();\n            break;\n        default:\n            color = 'orange'\n    }\n    return color;\n}\n\nself.onDataUpdated = function() {\n    var scope = self.ctx.$scope;\n    if(scope.data.length > 0){\n        for (i=0; i < scope.data.length; i++){\n            if(scope.data[i].data[0]){\n                scope.ledColor = updateColor(scope.data[i].data[0][1]); \n            }\n        }\n    }\n    self.ctx.detectChanges();\n}\n\nself.onResize = function() {\n \n}\n\nself.onDestroy = function() {\n}\n",
    "settingsSchema": "{\n    \"schema\" : {\n        \"type\" : \"object\",\n        \"title\" : \"settings\",\n        \"properties\" : {\n            \"title\": {\n                \"title\": \"LED title\",\n                \"type\": \"string\",\n                \"default\": \"LED\"\n            },\n            \"led1\": {\n                \"title\": \"LED 1 Color\",\n                \"type\": \"string\",\n                \"default\": \"green\"\n            },\n            \"led2\": {\n                \"title\": \"LED 2 Color\",\n                \"type\": \"string\",\n                \"default\": \"red\"\n            },\n            \"led3\": {\n                \"title\": \"LED 3 Color\",\n                \"type\": \"string\",\n                \"default\": \"orange\"\n            },\n            \"led4\": {\n                \"title\": \"LED 4 Color\",\n                \"type\": \"string\",\n                \"default\": \"violet\"\n            },\n            \"led5\": {\n                \"title\": \"LED 5 Color\",\n                \"type\": \"string\",\n                \"default\": \"yellow\"\n            }\n        }\n    }\n}",
    "dataKeySettingsSchema": "{}\n",
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.3534820112798911,\"funcBody\":\"\\nreturn Math.floor(Math.random() * 2);\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Multi LED Light\",\"showTitleIcon\":false,\"iconColor\":\"rgba(0, 0, 0, 0.87)\",\"iconSize\":\"24px\",\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":true,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"showLegend\":false}"
  }
}